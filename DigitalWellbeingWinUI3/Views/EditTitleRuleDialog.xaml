
<ContentDialog
    x:Class="DigitalWellbeingWinUI3.Views.EditTitleRuleDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:DigitalWellbeingWinUI3.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:l="using:WinUI3Localizer"
    mc:Ignorable="d"
    l:Uids.Uid="RuleDialog"
    Title="Edit Rule"
    PrimaryButtonText="Save"
    SecondaryButtonText="Cancel"
    IsPrimaryButtonEnabled="False"
    DefaultButton="Primary">

    <Grid RowSpacing="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Process Filter -->
        <TextBox x:Name="TxtProcess" l:Uids.Uid="RuleDialog_ProcessBox" Header="Process Name (Optional)" PlaceholderText="e.g. chrome (leave empty for all)" Grid.Row="0"/>

        <!-- Pattern -->
        <TextBox x:Name="TxtPattern" l:Uids.Uid="RuleDialog_PatternBox" Header="Match Pattern (Title)" PlaceholderText="Text or Regex to match" TextChanged="TxtPattern_TextChanged" Grid.Row="1"/>
        
        <!-- Match Type -->
        <ComboBox x:Name="ComboMatchType" l:Uids.Uid="RuleDialog_TypeBox" Header="Match Type" SelectedIndex="0" Grid.Row="2" HorizontalAlignment="Stretch" SelectionChanged="ComboMatchType_SelectionChanged">
            <ComboBoxItem l:Uids.Uid="RuleDialog_Type_Contains" Content="Contains (Default)" Tag="Contains"/>
            <ComboBoxItem l:Uids.Uid="RuleDialog_Type_StartsWith" Content="Starts With" Tag="StartsWith"/>
            <ComboBoxItem l:Uids.Uid="RuleDialog_Type_EndsWith" Content="Ends With" Tag="EndsWith"/>
            <ComboBoxItem l:Uids.Uid="RuleDialog_Type_Exact" Content="Exact Match" Tag="Exact"/>
            <ComboBoxItem l:Uids.Uid="RuleDialog_Type_Regex" Content="Regular Expression" Tag="Regex"/>
        </ComboBox>

        <!-- Replacement -->
        <TextBox x:Name="TxtReplacement" l:Uids.Uid="RuleDialog_ReplacementBox" Header="Replacement" PlaceholderText="New text (supports $1 capture groups)" Grid.Row="3"/>

        <!-- Test Playground -->
        <Expander l:Uids.Uid="RuleDialog_TestExpander" Header="Test Rule" Grid.Row="4" ExpandDirection="Down" HorizontalAlignment="Stretch">
            <StackPanel Spacing="8">
                <TextBox x:Name="TxtTestInput" l:Uids.Uid="RuleDialog_TestInput" Header="Test Input" PlaceholderText="Paste a sample window title here" TextChanged="TxtTestInput_TextChanged"/>
                <TextBlock l:Uids.Uid="RuleDialog_ResultLabel" Text="Result:" Style="{ThemeResource CaptionTextBlockStyle}" Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
                <TextBlock x:Name="TxtTestResult" Text="-" Style="{ThemeResource BodyStrongTextBlockStyle}" TextWrapping="Wrap"/>
            </StackPanel>
        </Expander>
    </Grid>
</ContentDialog>
