<?xml version="1.0" encoding="utf-8"?>
<ContentDialog
    x:Class="DigitalWellbeingWinUI3.Views.FocusScheduleDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:l="using:WinUI3Localizer"
    l:Uids.Uid="FocusDialog"
    Title="Focus Session"
    PrimaryButtonText="Save"
    CloseButtonText="Cancel"
    DefaultButton="Primary"
    CornerRadius="8"
    PrimaryButtonClick="PrimaryButton_Click">

    <StackPanel Spacing="16" MinWidth="400">
        
        <!-- Name -->
        <TextBox x:Name="NameBox" l:Uids.Uid="FocusDialog_NameBox" Header="Session Name" 
                 PlaceholderText="e.g., Morning Coding"/>

        <!-- Target App -->
        <StackPanel Spacing="4">
            <TextBlock l:Uids.Uid="FocusDialog_AppHeader" Text="Target Application" Style="{StaticResource BodyStrongTextBlockStyle}"/>
            <AutoSuggestBox x:Name="AppSuggestBox" 
                            l:Uids.Uid="FocusDialog_AppSuggest"
                            PlaceholderText="Type to search your apps..."
                            TextChanged="AppSuggestBox_TextChanged"
                            SuggestionChosen="AppSuggestBox_SuggestionChosen"
                            QueryIcon="Find"/>
            <TextBlock l:Uids.Uid="FocusDialog_AppAssist" Text="Select an app from your usage history" 
                       Style="{StaticResource CaptionTextBlockStyle}"
                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
        </StackPanel>

        <!-- Sub-App (Optional) -->
        <TextBox x:Name="SubAppBox" l:Uids.Uid="FocusDialog_SubAppBox" Header="Sub-App / Keyword (Optional)" 
                 PlaceholderText="e.g., GitHub, YouTube"/>

        <!-- Time Settings -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="16"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <TimePicker x:Name="StartTimePicker" l:Uids.Uid="FocusDialog_StartTime" Header="Start Time" Grid.Column="0"/>
            <NumberBox x:Name="DurationBox" l:Uids.Uid="FocusDialog_Duration" Header="Duration (minutes)" 
                       Grid.Column="2" 
                       Value="60" Minimum="1" Maximum="480"
                       SpinButtonPlacementMode="Inline"
                       Width="150"/>
        </Grid>

        <!-- Days -->
        <StackPanel Spacing="4">
            <TextBlock l:Uids.Uid="FocusDialog_DaysHeader" Text="Repeat on Days" Style="{StaticResource BodyStrongTextBlockStyle}"/>
            <StackPanel Orientation="Horizontal" Spacing="8">
                <ToggleButton x:Name="SunToggle" l:Uids.Uid="FocusDialog_Day_Sun" Content="S" Width="36"/>
                <ToggleButton x:Name="MonToggle" l:Uids.Uid="FocusDialog_Day_Mon" Content="M" Width="36"/>
                <ToggleButton x:Name="TueToggle" l:Uids.Uid="FocusDialog_Day_Tue" Content="T" Width="36"/>
                <ToggleButton x:Name="WedToggle" l:Uids.Uid="FocusDialog_Day_Wed" Content="W" Width="36"/>
                <ToggleButton x:Name="ThuToggle" l:Uids.Uid="FocusDialog_Day_Thu" Content="T" Width="36"/>
                <ToggleButton x:Name="FriToggle" l:Uids.Uid="FocusDialog_Day_Fri" Content="F" Width="36"/>
                <ToggleButton x:Name="SatToggle" l:Uids.Uid="FocusDialog_Day_Sat" Content="S" Width="36"/>
            </StackPanel>
            <TextBlock l:Uids.Uid="FocusDialog_OneTimeHint" Text="Leave all off for one-time session" 
                       Style="{StaticResource CaptionTextBlockStyle}"
                       Foreground="{ThemeResource TextFillColorSecondaryBrush}"/>
        </StackPanel>

        <!-- Mode -->
        <StackPanel Spacing="4">
            <TextBlock l:Uids.Uid="FocusDialog_ModeHeader" Text="Enforcement Mode" Style="{StaticResource BodyStrongTextBlockStyle}"/>
            <RadioButtons x:Name="ModeSelector">
                <RadioButton l:Uids.Uid="FocusDialog_Mode_Chill" Content="🟢 Chill - Toast notification only" Tag="Chill"/>
                <RadioButton l:Uids.Uid="FocusDialog_Mode_Normal" Content="🟠 Normal - Popup dialog (like time limits)" Tag="Normal" IsChecked="True"/>
                <RadioButton l:Uids.Uid="FocusDialog_Mode_Focus" Content="🔴 Focus - Close unauthorized apps" Tag="Focus"/>
            </RadioButtons>
        </StackPanel>

    </StackPanel>
</ContentDialog>
